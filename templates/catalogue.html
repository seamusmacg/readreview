{% extends "base.html" %}
{% block content %}
<!-- Full Catalogue of Books -->
<section class="catalogue">
  <div class="catalogue-container">
    <h1 class="center-align white-text">ReadReview Catalogue</h1>
    <ul class="collapsible popout">
      {% for book in books %}
      <li>
        <div class="collapsible-header">
          <i class="fas fa-angle-down"></i>
          <strong>{{ book.title }}</strong>
        </div>
        <div class="collapsible-body">
          <div class="row">
            <div class="col l2 m4">
              <img class="responsive-img" src="{{ book.image_url }}" alt="{{ book.title }}">

            </div>
            <div class="col l8 m8">
              <table>
                <thead>
                  <tr>
                    <th>{{ book.title }}</th>
                  </tr>
                </thead>

                <tbody>
                  <tr>
                    <td><strong style="font-weight: bold;">Author:</strong> {{ book.author }}</td>
                  </tr>
                  <tr>
                    <td><strong style="font-weight: bold;">Genre:</strong> {{ book.genre }}</td>
                  </tr>
                  <tr>
                    <td><strong style="font-weight: bold;">Pages:</strong> {{ book.pages }}</td>
                  </tr>
                  <tr>
                    <td><strong style="font-weight: bold;">Year Published:</strong> {{ book.year }}</td>
                  </tr>
                  <tr>
                    <td><strong style="font-weight: bold;">Summary:</strong> {{ book.summary }}</td>
                  </tr>

                  {% for review in reviews %}
                  {% if review.title == book.title %}
                  <thead>
                    <tr>
                      <th>Reviews for {{ book.title }}</th>
                    </tr>
                  </thead>

                  <tr>
                    <td>
                      {{ review.review }}
                      <br>
                      <i class="submission">Submitted by {{ review.username.capitalize() }} {{ review.date }}</i>
                    </td>
                  </tr>
                  <tr>
                    <thead>
                      <tr>
                        <th>Leave a review for {{ book.title }}</th>
                      </tr>
                    </thead>
                    <td>
                      <div class="row">
                        <div class="input-field">
                          <i class="material-icons prefix">mode_edit</i>
                          <textarea id="textarea1" class="materialize-textarea"></textarea>
                          <label for="textarea1">Review</label>
                        </div>
                      </div>
                      <button class="btn waves-effect waves-light" type="submit" name="action">Submit
                        <i class="material-icons right">send</i>
                      </button>
                    </td>
                  </tr>
                  {% endif %}
                  {% endfor %}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </li>
      {% endfor %}
    </ul>

  </div>
</section>

{% endblock %}